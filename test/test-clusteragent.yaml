apiVersion: bmc.spidernet.io/v1beta1
kind: ClusterAgent
metadata:
  name: test-clusteragent
spec:
  agentYaml:
    underlayInterface: kube-system/macvlan-pod-network
    image: spidernet-io/bmc/agent:v0.0.1
    replicas: 1
    # Optional: Node affinity configuration
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: kubernetes.io/hostname
            operator: In
            values:
            - worker-1
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        preference:
          matchExpressions:
          - key: node-role.kubernetes.io/worker
            operator: In
            values:
            - "true"
